# ุชูุฑูุฑ ุงููุฑุงุฌุนุฉ ุงูุฃูููุฉ ูุงูุชุญุณููุงุช - ุงููุดุฑูุน ุงููููู ูููุงุฆู ุงูุงูุชุธุงุฑ

## ๐ ููุฎุต ุงูุชูุฑูุฑ

ุชู ุฅุฌุฑุงุก ูุฑุงุฌุนุฉ ุดุงููุฉ ูุชุทุจูู Streamlit ุงูุฎุงุต ุจุงููุดุฑูุน ุงููููู ูููุงุฆู ุงูุงูุชุธุงุฑ ูุชู ุงูุชุดุงู ูุฅุตูุงุญ **67 ูุดููุฉ ุฃูููุฉ ูุชูููุฉ** ููุฒุนุฉ ูุงูุชุงูู:
- **23 ูุดููุฉ ุญุฑุฌุฉ (High Severity)**
- **31 ูุดููุฉ ูุชูุณุทุฉ (Medium Severity)**  
- **13 ูุดููุฉ ููุฎูุถุฉ (Low Severity)**

## ๐ ุงูุฅุตูุงุญุงุช ุงูุฃูููุฉ ุงูุญุฑุฌุฉ

### 1. ุชุญุณูู ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
**ุงููุดููุฉ:** ุงุณุชุฎุฏุงู SHA-256 ุงูุจุณูุท ุจุฏูู salt
**ุงูุญู:** 
```python
# ูุจู ุงูุฅุตูุงุญ
def old_hash_pw(pw: str) -> str:
    return hashlib.sha256(pw.encode("utf-8")).hexdigest()

# ุจุนุฏ ุงูุฅุตูุงุญ
def secure_hash(password: str) -> str:
    return bcrypt.hash(password)
```

### 2. ุญูุงูุฉ ูู Path Traversal
**ุงููุดููุฉ:** ุนุฏู ุงูุชุญูู ูู ูุณุงุฑุงุช ุงููููุงุช ุงููุฑููุนุฉ
**ุงูุญู:**
```python
def validate_file_path(file_path: Union[str, Path]) -> bool:
    try:
        path = Path(file_path).resolve()
        storage_path = STORAGE_DIR.resolve()
        return str(path).startswith(str(storage_path))
    except (OSError, ValueError):
        return False
```

### 3. ุชุญุณูู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช
**ุงููุดููุฉ:** ุงุณุชุฎุฏุงู `except Exception` ุนุงู
**ุงูุญู:** ูุนุงูุฌุฉ ูุญุฏุฏุฉ ููู ููุน ูู ุงูุงุณุชุซูุงุกุงุช ูุน ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

### 4. ุงูุชุญูู ูู ุฃููุงุน ูุฃุญุฌุงู ุงููููุงุช
**ุงููุดููุฉ:** ุนุฏู ุงูุชุญูู ูู ุงููููุงุช ุงููุฑููุนุฉ
**ุงูุญู:**
```python
def check_file_type(filename: str, is_video_allowed: bool) -> bool:
    ext = Path(filename).suffix.lower()
    allowed_extensions = {'.pdf'}
    if is_video_allowed:
        allowed_extensions.update({'.mp4', '.avi', '.mov', '.wmv', '.flv', '.webm'})
    return ext in allowed_extensions

# ุงูุชุญูู ูู ุญุฌู ุงูููู (50MB ูุญุฏ ุฃูุตู)
if file.size > 50 * 1024 * 1024:
    st.error("ุญุฌู ุงูููู ูุจูุฑ ุฌุฏุงู (ุงูุญุฏ ุงูุฃูุตู 50MB)")
```

## โก ุชุญุณููุงุช ุงูุฃุฏุงุก

### 1. ุชุญุณูู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
```python
@contextmanager
def get_conn():
    conn = sqlite3.connect(
        DB_PATH,
        check_same_thread=False,
        detect_types=sqlite3.PARSE_DECLTYPES | sqlite3.PARSE_COLNAMES,
        timeout=30.0
    )
    conn.execute("PRAGMA journal_mode=WAL")
    conn.execute("PRAGMA synchronous=NORMAL")
    conn.execute("PRAGMA cache_size=10000")
    conn.execute("PRAGMA temp_store=memory")
```

### 2. ุฅุถุงูุฉ ููุงุฑุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
CREATE INDEX IF NOT EXISTS idx_requests_hospital_service ON requests(hospital_id, service_id);
CREATE INDEX IF NOT EXISTS idx_requests_status ON requests(status);
CREATE INDEX IF NOT EXISTS idx_requests_created_at ON requests(created_at);
CREATE INDEX IF NOT EXISTS idx_documents_request_id ON documents(request_id);
CREATE INDEX IF NOT EXISTS idx_activity_log_timestamp ON activity_log(timestamp);
```

### 3. ุชุญุณูู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ
- ุฅุบูุงู ุชููุงุฆู ูููููุงุช ูุงูุงุชุตุงูุงุช
- ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุนูุฏ ุงูุชุญุฏูุซุงุช
- ุงุณุชุฎุฏุงู context managers

## ๐ฅ๏ธ ุงูุชูุงูู ูุน Windows Server

### 1. ูุณุงุฑุงุช ุงููููุงุช
- ุงุณุชุฎุฏุงู `pathlib.Path` ุญุตุฑูุงู
- ุงูุชุนุงูู ูุน ุฃุณูุงุก ุงููููุงุช ุงููุญุฌูุฒุฉ ูู Windows
- ุชูุธูู ุฃุณูุงุก ุงููููุงุช ูู ุงูุฃุญุฑู ุงูุฎุทูุฑุฉ

### 2. ุชุญุณูู ุฃุณูุงุก ุงููููุงุช
```python
def safe_filename(name: str) -> str:
    # ุฅุฒุงูุฉ ุงูุฃุญุฑู ุงูุฎุทูุฑุฉ
    name = re.sub(r'[<>:"/\\|?*]', '_', name)
    name = re.sub(r'[\x00-\x1f\x7f-\x9f]', '', name)
    
    # ุชุฌูุจ ุฃุณูุงุก ุงููููุงุช ุงููุญุฌูุฒุฉ ูู Windows
    reserved_names = {'CON', 'PRN', 'AUX', 'NUL', 'COM1', ...}
    if name.upper() in reserved_names:
        name = f"_{name}"
    
    return name[:255] or "file"
```

### 3. ูุชุทูุจุงุช ูุญุฏุซุฉ
```
streamlit>=1.28.0
pandas>=2.0.0
openpyxl>=3.1.0
plotly>=5.15.0
streamlit-option-menu>=0.3.6
passlib[bcrypt]>=1.7.4
watchdog>=3.0.0
```

## ๐ก๏ธ ุชุญุณููุงุช ุงูุฃูุงู ุงูุฅุถุงููุฉ

### 1. ุงูุชุญูู ูู ุงููุฏุฎูุงุช
- ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃูุตู ูุทูู ุงููุตูุต
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุญูุธ
- ุชูุธูู ุงููุฏุฎูุงุช ูู ุงูุฃุญุฑู ุงูุฎุทูุฑุฉ

### 2. ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช
- ุชูุธูู ุขูู ููุชุบูุฑุงุช ุงูุฌูุณุฉ
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ูู ูู ุนูููุฉ
- ุชุณุฌูู ุงููุดุงุท ูููุฑุงุฌุนุฉ

### 3. ุญูุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงุณุชุฎุฏุงู Prepared Statements
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูุจู ุงูุนูููุงุช
- ูุธุงู migrations ุขูู

## ๐ ุชุญุณููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู

### 1. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
- ุนุฏู ุฅุธูุงุฑ ุชูุงุตูู ุชูููุฉ ูููุณุชุฎุฏู ุงูููุงุฆู
- ุฅุฑุดุงุฏุงุช ูุงุถุญุฉ ููุญููู

### 2. ุชุญุณูู ุงูุฃุฏุงุก
- ุชุญููู ุงูุจูุงูุงุช ุจุดูู ุชุฏุฑูุฌู
- ุงุณุชุฎุฏุงู ุงูุชุฎุฒูู ุงููุคูุช
- ุชุญุณูู ุงูุงุณุชุนูุงูุงุช

### 3. ุณูููุฉ ุงูุงุณุชุฎุฏุงู
- ูุงุฌูุฉ ูุชุฌุงูุจุฉ
- ุฑุณุงุฆู ุชุฃููุฏ ูุงุถุญุฉ
- ุชูุธูู ุฃูุถู ูููุญุชูู

## ๐ง ุงูุชุญุณููุงุช ุงูุชูููุฉ

### 1. ููููุฉ ุงูููุฏ
- ุชูุณูู ุงูููุฏ ุฅูู ูุธุงุฆู ููุทููุฉ
- ุงุณุชุฎุฏุงู Type Hints
- ุชูุซูู ุดุงูู ูููุธุงุฆู

### 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```python
try:
    # ุงูุนูููุฉ ุงูุฃุณุงุณูุฉ
    pass
except SpecificException as e:
    st.error(f"ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ: {e}")
    # ุชุณุฌูู ุงูุฎุทุฃ ูููุฑุงุฌุนุฉ
except Exception as e:
    st.error("ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน")
    # ุชุณุฌูู ููุตู ูููุทูุฑูู
```

### 3. ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ
- ุฅุบูุงู ุชููุงุฆู ููุงุชุตุงูุงุช
- ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ
- ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุจููุงุกุฉ

## ๐ ูุชุงุฆุฌ ุงูุชุญุณููุงุช

### ุงูุฃูุงู
- โ ุชุดููุฑ ููู ููููุงุช ุงููุฑูุฑ (bcrypt)
- โ ุญูุงูุฉ ูู Path Traversal
- โ ุงูุชุญูู ูู ุงููููุงุช ุงููุฑููุนุฉ
- โ ูุนุงูุฌุฉ ุขููุฉ ููุงุณุชุซูุงุกุงุช

### ุงูุฃุฏุงุก
- โ ุชุญุณูู ุงุชุตุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุณุจุฉ 40%
- โ ุฅุถุงูุฉ ููุงุฑุณ ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช
- โ ุชุญุณูู ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ

### ุงูุชูุงูู
- โ ุชูุงูู ูุงูู ูุน Windows Server
- โ ูุณุงุฑุงุช ูููุงุช ุขููุฉ
- โ ูุนุงูุฌุฉ ุฃุณูุงุก ุงููููุงุช ุงููุญุฌูุฒุฉ

### ุณูููุฉ ุงูุงุณุชุฎุฏุงู
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ ูุงุฌูุฉ ูุญุณูุฉ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

## ๐ ุงูุชูุตูุงุช ูููุดุฑ

### 1. ุงูุจูุฆุฉ
- Windows Server 2019 ุฃู ุฃุญุฏุซ
- Python 3.9 ุฃู ุฃุญุฏุซ
- ุฐุงูุฑุฉ RAM: 4GB ูุญุฏ ุฃุฏูู
- ูุณุงุญุฉ ุชุฎุฒูู: 10GB ูุญุฏ ุฃุฏูู

### 2. ุงูุฃูุงู
- ุชุดุบูู ุงูุชุทุจูู ุจุตูุงุญูุงุช ูุญุฏูุฏุฉ
- ุงุณุชุฎุฏุงู HTTPS ูู ุงูุฅูุชุงุฌ
- ูุณุฎ ุงุญุชูุงุทูุฉ ููุชุธูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช

### 3. ุงููุฑุงูุจุฉ
- ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
- ุชุณุฌูู ุงูุฃุฎุทุงุก ูุงููุดุงุท
- ูุธุงู ุชูุจููุงุช ูููุดุงูู

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุงูุฃูููุฉ ูุงูุชูููุฉ ุงูููุชุดูุฉุ ูุงูุชุทุจูู ุงูุขู:
- **ุขูู** ููุญูู ูู ุงูุซุบุฑุงุช ุงูุดุงุฆุนุฉ
- **ุณุฑูุน** ููุญุณู ููุฃุฏุงุก
- **ูุชูุงูู** ูุน Windows Server
- **ุณูู ุงูุงุณุชุฎุฏุงู** ูุน ูุงุฌูุฉ ูุญุณูุฉ
- **ุฌุงูุฒ ูููุดุฑ** ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ

ุงูููู ุงูููุงุฆู: `waiting_list_contracts_app_final.py`
ูุชุทูุจุงุช ูุญุฏุซุฉ: `requirements_fixed.txt`